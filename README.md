World‑Dashboard – Global Intelligence Nexus
世界規模の地政学リスクや経済・社会指標を、誰でも俯瞰できる形で可視化するためのWebアプリケーションです。現在は基盤機能を整備した段階であり、今後の拡張に備えて既存UIやコンテンツ構造を理解できるようにまとめています。
プロジェクトの目的
世界の出来事を単なるニュースとして消費するのではなく、国ごとの経済・社会・政治・リスクの構造を横断的に比較できるようにすることが「World‑Dashboard」の使命です。各国の基礎データや危機指数を整理し、俯瞰図と詳細分析をシームレスに切り替えられるよう設計しました。現在のバージョンは v6.3（Global Intelligence Nexus）です。
主要なデータソース（2026-02時点で半年以内更新を優先）
•	経済：IMF WEO (2025-10) + World Bank DataBank / WDI（2026-01更新）
•	人口：UN Data API（2025-12更新）+ UN DESA Population Division Data Portal（2026-01取得）
•	政治体制：V‑Dem Democracy Report 2025 + IDEA Democracy Tracker（2025Q4反映）
•	リスク指数：Fragile States Index 2026 + ACLED Conflict Data（週次更新、2026-02取得）
これらの統計値を国別に整理したマスターファイル（worlddash_global_master.json）には、各国のISO 3コード、国名、名目GDP、GDP成長率、人口、FSI総合スコアなどが含まれています。UI表示用として見出し文やスコアも保持されており、レーダーチャートなどで使用されます。
現在実装済みの主な要素
1. インタラクティブ世界地図（World Map）
•	リスクのヒートマップ表示 – 各国のFSI総合スコア（0-120）を正規化し、安定性補正（stability_score）を加えた再定義リスクスコア（0-100）で色グラデーション表示します[4]。リスクが不明な国は暗色で表示されます。
•	US Influenceレイヤー – allied_institutions_exposure / fdi_from_us / trade_with_us_pct / security_ties / tech_dependency / financial_exposure / logistics_exposure を用いた再定義フォーミュラ（0-100）で全国家・地域の影響度を再算出し、最新情勢を反映します。
•	China Influenceレイヤー – 既存の複合指数（貿易・BRI・FDI・AIIB・インフラ）をベースに、最新化フォーミュラで全国家・地域スコアを再計算し、地図レイヤーへ反映します。
•	Natural Resourcesレイヤー – 既存の prod / dep / res 指標を用いた再定義フォーミュラ（0-100）で全国家・地域スコアを再計算し、資源戦略レイヤーへ反映します。
•	カーソル操作 – 国の上にマウスを置くと国名とISO 3コードをツールチップで表示し[5]、クリックすると詳細パネルが開きます[6]。
•	ズーム・パン – MapLibre GL によるインタラクティブ操作（パン／ズーム）に対応し、表示中レイヤーと同一ソースで一貫したインタラクションを提供します。
2. Analytics Panel（世界ランキング）
サイドバー型パネルで、世界各国を複数指標でランキング表示します。
•	選択可能な指標 – 名目GDP、FSIリスク、GDP成長率、人口の４つのタブがあります[8]。タブを切り替えると並び替えが動的に変わります[9]。
•	バーグラフ表示 – 各国の値を色付きのバーで表し、最大値に対する比率が一目で分かります[10]。国名をクリックするとその国の詳細パネルが開きます[11]。
•	閉じる／開く操作 – パネル自体はボタンでスライド表示／非表示を切り替えられます[12]。
3. Country Details Panel（国別詳細）
国をクリックすると画面右側に展開されるパネルです。各国の基本情報や指標を素早く確認できます。
内容	説明
見出し	国名・ISO 3コードとステータス表示。「TARGET_ACQUIRED」などのコード風ラベルと、タイプライター風に表示されるキャッチフレーズ[13][14]。

主要指標	人口、名目GDP、GDP成長率、FSIリスク指数をカード状のメトリクスとして表示します[15]。

レーダーチャート	経済スコア・安定スコア・レジリエンス（FSIから計算）を３軸にしたグラフを描き、国家のバランスを視覚化します[16]。

Deep Dive Reportボタン	その国に深掘りレポートが存在する場合に表示され、クリックすると詳細レポートパネルが開きます[17]。

4. Deep Report Panel（深掘りレポート）
より専門的な分析を行うパネルで、各国の政治経済情勢を文脈付きで解説します。
•	Executive Summary – 政治・経済・外交の観点から重要なポイントを箇条書きでまとめます[18]。各要素にはデータソースと信頼度が紐づけられています[19]。
•	Resource Endowment – 天然資源や人的資源など、その国が有する「資源」の概要と主な資源名を示します[20]。
•	Political Stability – 政治体制の特徴と主要アクターを記載します[21]。
•	Economic Structure – 産業構造や経済戦略の概略を示し[22]、持続的成長のための課題を理解する手助けとなります。
•	更新情報と信頼度 – レポート作成日時と総合信頼度をフッターに表示します[23]。

5. Global Stream Panel（ニュースフィード）
画面下部に配置されたフィードパネルで、各国の構造を理解するための時事ニュースをリアルタイムに取得します。
•	RSS連携 – BBC World、NYT World、UN Newsなど複数の国際ニュースソースをRSS経由で取得し[24]、ニュース2つを並列表示します[25]。
•	自動更新 – パネルが展開されると最新の数件を読み込み、日付ラベルとタイトルをリスト表示します[26]。
•	色分け – ソースごとにカラーコードと背景色を設定し、視覚的に区別しやすくしています[27]。

6. UIデザインと技術スタック

本プロジェクトは、企業のステークホルダーや専門家が迅速かつ正確に意思決定を行えるよう、認知的負荷を最小限に抑えた**「Professional Intelligence Interface」**を採用しています。v6.3へのアップデートにおいて、情報の可読性とデータの信頼性を最優先したデザイン刷新を行いました。

* **ビジュアルテーマ (Matte & Deep)**
* **ベースカラー**: 深みのある `Slate-950` (#020617) を基調としたダークモード。旧来のノイズテクスチャやスキャンライン、過剰なネオン発光を廃止し、長時間の分析作業でも目が疲れないマットな質感に統一しました。
* **コンポーネント**: `Backdrop Blur`（すりガラス効果）と微細なホワイトボーダー（opacity 6%）を組み合わせ、情報の階層を物理的な奥行き（Shadow）で表現するモダンなカードデザインを採用しています。


* **データ可視化 (Precision over Immersion)**
* **World Map**: 地図上の装飾的な発光エフェクトを排除し、データ値を正確に識別できるソリッドな配色に変更しました。
* **Dynamic Legend System**: 画面右下に、選択中のレイヤー（FSIリスク、中国/米国影響度、資源）に応じて動的に切り替わる「スケールメモリ（凡例）」を常設。色が示す具体的な数値範囲（0-100等）と意味を常に参照可能にしました。


* **タイポグラフィ**
* 装飾的な `JetBrains Mono` の多用を改め、UI全体には可読性に優れた **`Inter` (Sans-serif)** を採用。数値データやコード、ID表示などの限定的な箇所にのみ等幅フォントを使用することで、情報のメリハリをつけています。


* **技術スタック**
* **Frontend**: React 18, Vite
* **Styling**: Tailwind CSS (Utility-first), Lucide React (Icons)
* **Visualization**: MapLibre GL JS (World Map), Recharts (Radar/Bar Charts)

## 地図描画方針（feature_id 統一とレイヤー優先順位）

今後の地図実装は **MapLibreWorldMap を唯一の運用系レンダラー** とし、
**LegacyWorldMap（react-simple-maps 様式）は以降活用しない** 方針です。

### 1) 色決定キーの統一
- 地図の色決定は ISO3 専用ロジックではなく、`feature_id` を主キーとして扱います。
- 解決順は `feature_id` → `custom_geoid` → `iso3`（または `key`）です。
- これにより国境定義の変更や非ISO地物の追加時も、色決定ロジックを再実装せずに運用できます。

### 2) index データ参照スキーマの統一
- `public/*_index.json` は `countries` だけでなく `regions` / `disputed` も同じ参照層で解釈します。
- 地図レイヤー側は地物タイプを意識せず、共通の feature 解決ロジックでスコア取得します。

### 3) スコア生成処理の抽象化
- 従来の `riskByIso` / `influenceByIso` のような個別実装は行わず、
  レイヤー共通ユーティリティでスコアマップを生成します。
- これにより、境界データや入力JSONの構造変更があっても追従コストを最小化します。

### 4) レイヤー表示・イベント優先順位
- 表示と操作の優先順位は **国ポリゴン > 係争地オーバーレイ** を仕様とします。
- hover / click 判定でも同順序を適用し、イベント競合を防止します。

今後の開発ビジョン
現在は世界の地政学的な構造を表層的なデータで俯瞰できる状態ですが、本プロジェクトでは次のような機能追加を計画しています。
・マクロ分析パネルの拡張と充実
・情報ソースを最新のものへ継続的に更新する運用を新設（Data Freshness Auditと連動）
・データ鮮度監査（Data Freshness Audit）を運用し、半年超データを自動的に更新候補へ振り分ける
・FSIレイヤーは再定義済み計算プロセス（正規化 + 安定性補正）を基準に全国家・地域へ適用する
